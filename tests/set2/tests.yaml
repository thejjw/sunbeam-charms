gate_bundles:
  - smoke
smoke_bundles:
  - smoke
# There is no storage provider at the moment so cannot run tests.
configure:
  - zaza.charm_tests.noop.setup.basic_setup
  #- zaza.openstack.charm_tests.keystone.setup.wait_for_all_endpoints
  #- zaza.openstack.charm_tests.keystone.setup.add_tempest_roles
tests:
  - zaza.charm_tests.noop.tests.NoopTest
  #- zaza.openstack.charm_tests.keystone.tests_ldap_k8s.LdapExplicitCharmConfigTestsK8S
  #- zaza.openstack.charm_tests.tempest.tests.TempestTestWithKeystoneMinimal
  #- zaza.openstack.charm_tests.openstack_exporter.tests.OpenstackExporterTest
tests_options:
  trust:
    - smoke
  ignore_hard_deploy_errors:
    - smoke

#  tempest:
#    default:
#      smoke: True
#      exclude-list:
#        - "tempest.api.image.v2.test_images.BasicOperationsImagesTest.test_register_upload_get_image_file"
#      include-list:
#        - "tempest.api.identity.v3.test_application_credentials.ApplicationCredentialsV3Test.test_create_application_credential"

target_deploy_status:
  traefik:
    workload-status: active
    workload-status-message-regex: '^$'
  rabbitmq:
    workload-status: active
    workload-status-message-regex: '^$'
  keystone:
    workload-status: waiting
    workload-status-message-regex: '^.*domain-config.*integration incomplete.*$|^$'
  mysql:
    workload-status: active
    workload-status-message-regex: '^.*$'
  cinder:
    workload-status: active
    workload-status-message-regex: '^$'
  cinder-ceph:
    workload-status: blocked
    workload-status-message-regex: '^.*ceph.*$'
  ceilometer:
    workload-status: waiting
    workload-status-message-regex: '^.*Not all relations are ready$'
  aodh:
    workload-status: active
    workload-status-message-regex: '^.*$'
  gnocchi:
    workload-status: blocked
    workload-status-message-regex: '^.*ceph.*$'
  keystone-ldap:
    workload-status: active
    workload-status-message-regex: '^$'
  ldap-server:
    workload-status: active
    workload-status-message-regex: '^$'
  openstack-exporter:
    workload-status: active
    workload-status-message-regex: '^$'
