{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8d304e0f_04807653",
        "filename": ".gitignore",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 32363
      },
      "writtenOn": "2024-02-28T08:58:57Z",
      "side": 1,
      "message": "Is this good practice that func test are creating local file like this? Nevertheless, I think we should add *.log to ignore any log file.",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9df39e86_f04a0e88",
        "filename": ".gitignore",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T10:22:30Z",
      "side": 1,
      "message": "Not sure, but yeah I wanted to be specific here to document that this is a specific artefact from the func tests.",
      "parentUuid": "8d304e0f_04807653",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26e2ccb7_e585521b",
        "filename": ".gitignore",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-28T19:12:23Z",
      "side": 1,
      "message": "I agree with Robert here that having functional tests creating local files that will not be cleaned up upon completion doesn\u0027t seem to be a good practice. Maybe we should consider using tmp folder for this purpose.\n\nAnd this actual out of the scope in this patch, so maybe we should add it into the func test patch instead.",
      "parentUuid": "9df39e86_f04a0e88",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a5ce1e1_f60f7b3b",
        "filename": ".gitignore",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T22:22:10Z",
      "side": 1,
      "message": "I\u0027ve removed this changed to avoid confusion.  It\u0027s not related to changes in this patch, and is out of scope.  We can add it to the gitignore another time.",
      "parentUuid": "26e2ccb7_e585521b",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5efb7cab_ef6e774e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 32363
      },
      "writtenOn": "2024-02-28T08:58:57Z",
      "side": 1,
      "message": "Some questions, other than that it looks good.",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbc2a70b_77c38b31",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T10:22:30Z",
      "side": 1,
      "message": "Thanks for your questions!  I\u0027ve responded. ðŸ˜Š",
      "parentUuid": "5efb7cab_ef6e774e",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b700ed8e_c683f171",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-28T19:12:23Z",
      "side": 1,
      "message": "Thanks for the updates according to our discussion result. I left a few more comments inline",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dc04a59_9a7c8ae4",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 6
      },
      "lineNbr": 303,
      "author": {
        "id": 32363
      },
      "writtenOn": "2024-02-28T08:58:57Z",
      "side": 1,
      "message": "It\u0027s ok to return from function without any event.defer?",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96ab267f_9f56d652",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 6
      },
      "lineNbr": 303,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T10:22:30Z",
      "side": 1,
      "message": "Yes, because we\u0027ll get a new event when keystone is ready. ðŸ˜Š",
      "parentUuid": "5dc04a59_9a7c8ae4",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3acefee4_0d17c94e",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 6
      },
      "lineNbr": 354,
      "author": {
        "id": 32363
      },
      "writtenOn": "2024-02-28T08:58:57Z",
      "side": 1,
      "message": "Like this we have different behavior, since in previous version if \"auth-url\" was empty string we return True and not it will be False. I think that\u0027s ok, but mention here.",
      "range": {
        "startLine": 352,
        "startChar": 8,
        "endLine": 354,
        "endChar": 9
      },
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36f7b98e_d43157b8",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 6
      },
      "lineNbr": 354,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T10:22:30Z",
      "side": 1,
      "message": "Yes, good to note thanks.  This is intentional, because technically it\u0027s not all ready until the charm has recorded a value for both auth-url and domain-id (they appear to be able to be set from separate responses).",
      "parentUuid": "3acefee4_0d17c94e",
      "range": {
        "startLine": 352,
        "startChar": 8,
        "endLine": 354,
        "endChar": 9
      },
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c1d4308_f685adc9",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 6
      },
      "lineNbr": 596,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-28T19:12:23Z",
      "side": 1,
      "message": "Question: why we are moving leader unit check after setting tempest_ready to false? I know that the code is not fully adapted to the `leader` approach, but I do not understand the re-ordering.",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2de3dae9_22516b5f",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 6
      },
      "lineNbr": 596,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T22:22:10Z",
      "side": 1,
      "message": "The tempest ready key is an attribute of the unit, not the application, so it\u0027s ok to set it per-application.  I guess I\u0027m thinking about it in terms of what if there were 2+ units, it would be better for the non-leader units to be explicit that tempest is no longer ready on all units.  Right now it doesn\u0027t make any difference, because we only support a single unit though.",
      "parentUuid": "7c1d4308_f685adc9",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "869b1358_4ec50460",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 6
      },
      "lineNbr": 596,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-28T22:29:57Z",
      "side": 1,
      "message": "In the `_on_provider_ready` function, you are checking the unit leader at the beginning (before setting tempest ready). I agree that it probably doesn\u0027t make a different in our single unit setup, but still they should be kept consistent to not induce confusion.",
      "parentUuid": "2de3dae9_22516b5f",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e580c0e_93c94832",
        "filename": "charms/tempest-k8s/src/utils/cleanup.py",
        "patchSetId": 6
      },
      "lineNbr": 150,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-28T19:12:23Z",
      "side": 1,
      "message": "I think we should use `None` instead of empty string because `external_gateway_info` expects a `dict` type ([1]).\n\n[1]: https://github.com/openstack/openstacksdk/blob/master/openstack/network/v2/router.py#L60",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8020c0d_061dd7ca",
        "filename": "charms/tempest-k8s/src/utils/cleanup.py",
        "patchSetId": 6
      },
      "lineNbr": 150,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-28T22:22:10Z",
      "side": 1,
      "message": "Thanks, good point.  Technically though, neither `None` nor `str` fit a `dict` type.  It does work with an empty string, but I took another look at the rest api docs https://docs.openstack.org/api-ref/network/v2/ and it does seem like `None` would be the most appropriate, thanks.\n\n```\nexternal_gateway_info\n\t\n\nbody\n\t\n\nobject\n\t\n\nThe external gateway information of the router. If the router has an external gateway, this would be a dict with network_id, enable_snat, external_fixed_ips, qos_policy_id, enable_default_route_ecmp and enable_default_route_bfd. Otherwise, this would be null.\n```",
      "parentUuid": "4e580c0e_93c94832",
      "revId": "b1ef540c376f34ecd3b27df3fe1d5893e8fce69a",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}