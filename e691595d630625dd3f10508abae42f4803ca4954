{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "75db0986_2b5730a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T16:28:48Z",
      "side": 1,
      "message": "Overall looks good. Just some questions and a small suggestion",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0848e9ad_b6438604",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 79,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T16:28:48Z",
      "side": 1,
      "message": "suggestion: \n```\nreturn TEMPEST_PERIODIC_OUTPUT if self.value \u003d\u003d self.PERIODIC else TEMPEST_ADHOC_OUTPUT\n```",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3bf50fd3_8b7f1efd",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 79,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-01T22:46:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0848e9ad_b6438604",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aed8c0e7_f67730c7",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T16:28:48Z",
      "side": 1,
      "message": "Question: what does this `event.set_results` do?",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6af750f7_c72636a1",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-01T22:46:13Z",
      "side": 1,
      "message": "This sets it in the structured data in the action result.\n\nWe definitely should print the command, but I\u0027m not sure what we need in the structured data.  Perhaps this can wait until later when we implement this on the sunbeam client side, when we\u0027ll know what kind of data we\u0027ll need (the full juju command, or just the file path, etc.) - so the sunbeam client can then retrieve the file.",
      "parentUuid": "aed8c0e7_f67730c7",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0e6733c_61d362c0",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-01T22:53:28Z",
      "side": 1,
      "message": "Example of the output (yaml formatted):\n\n```\nubuntu@serverstack-sunbeam-0:~$ juju run --wait 600s tempest-k8s/0 validate test-list\u003dreadonly-quick --format yaml\nRunning operation 42 with 1 task\n  - task 43 on unit-tempest-k8s-0\n\nWaiting for task 43...\ntempest-k8s/0:\n  id: \"43\"\n  results:\n    copy-cmd: juju scp --container tempest tempest-k8s/0:/var/lib/tempest/workspace/tempest-validation.log\n      tempest-validation.log\n    return-code: 0\n    stdout: |\n      Totals\n      \u003d\u003d\u003d\u003d\u003d\u003d\n      Ran: 24 tests in 8.7153 sec.\n       - Passed: 21\n       - Skipped: 3\n       - Expected Fail: 0\n       - Unexpected Success: 0\n       - Failed: 0\n      Sum of execute time for each test: 10.6048 sec.\n      For detailed results, copy the log file by running:\n        juju scp --container tempest tempest-k8s/0:/var/lib/tempest/workspace/tempest-validation.log tempest-validation.log\n  status: completed\n  timing:\n    completed: 2024-02-01 22:49:28 +0000 UTC\n    enqueued: 2024-02-01 22:46:40 +0000 UTC\n    started: 2024-02-01 22:46:41 +0000 UTC\n  unit: tempest-k8s/0\n```",
      "parentUuid": "6af750f7_c72636a1",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66be61e2_b3d8fe86",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T23:45:09Z",
      "side": 1,
      "message": "I see. On the sunbeam side we will ask the user to input the destination path, so I think only having a field for source path (where the result is stored in the container) is enough.",
      "parentUuid": "a0e6733c_61d362c0",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a413ece_afe6243c",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 35007
      },
      "writtenOn": "2024-02-02T02:20:00Z",
      "side": 1,
      "message": "Looks nice! Have you try with the full test to validate the functionality ?",
      "parentUuid": "66be61e2_b3d8fe86",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0d43052_e30f4f1a",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-02T03:38:26Z",
      "side": 1,
      "message": "Agreed, we don\u0027t need the full thing in the structural output, in fact we may not need any since the path is hardcoded.  Let\u0027s leave it for now, and we can add to it if we want it when implementing the sunbeam client side.\n\nWhat kind of full test are you meaning Ray?  Unit tests cover all this, but I\u0027m not checking the print output though.",
      "parentUuid": "0a413ece_afe6243c",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7645c8bc_5d5c3a90",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-02T03:49:14Z",
      "side": 1,
      "message": "(I\u0027ve manually tested everything)",
      "parentUuid": "b0d43052_e30f4f1a",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c8fd1e5_b688c045",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 35007
      },
      "writtenOn": "2024-02-02T04:00:42Z",
      "side": 1,
      "message": "running the action without --smoke flag, and possibly can --parallel. Just want to see if it will still consume too much memory",
      "parentUuid": "7645c8bc_5d5c3a90",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67699b90_37869482",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-02T04:22:19Z",
      "side": 1,
      "message": "Ah I see.  It worked for me before, it was just very slow.  Is this something you could test, since it broke it for you before?",
      "parentUuid": "8c8fd1e5_b688c045",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "272a333c_6007ab03",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-05T17:33:59Z",
      "side": 1,
      "message": "+1 on testing whether the patch solves the OOM issue we saw.",
      "parentUuid": "67699b90_37869482",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b94f637d_eee5a95e",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-06T04:04:40Z",
      "side": 1,
      "message": "This definitely solves the issue of too much output.  For the OOM issue, only Ray saw this.",
      "parentUuid": "272a333c_6007ab03",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75cf0181_350aa1fe",
        "filename": "charms/tempest-k8s/src/charm.py",
        "patchSetId": 8
      },
      "lineNbr": 246,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-07T00:38:11Z",
      "side": 1,
      "message": "I ran the full test list, and tempest completed successfully. ðŸ˜Š",
      "parentUuid": "b94f637d_eee5a95e",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "351a3678_de6bcbaf",
        "filename": "charms/tempest-k8s/src/templates/tempest-run-wrapper.j2",
        "patchSetId": 8
      },
      "lineNbr": 14,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T16:28:48Z",
      "side": 1,
      "message": "Question: what is the benefit of also saving the discover-tempest-config stdout to the result file? To log in case it fails?",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a3ef0ff_5cbf6fe7",
        "filename": "charms/tempest-k8s/src/templates/tempest-run-wrapper.j2",
        "patchSetId": 8
      },
      "lineNbr": 14,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-01T22:46:13Z",
      "side": 1,
      "message": "Yes, to log in case of failure, otherwise it won\u0027t be recorded elsewhere.\n\nI set it up so the only output from the script is the summary, so the charm can run the script and print the output to the user.  The rest is logged to the file.",
      "parentUuid": "351a3678_de6bcbaf",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef6dcc19_5a2346df",
        "filename": "charms/tempest-k8s/src/templates/tempest-run-wrapper.j2",
        "patchSetId": 8
      },
      "lineNbr": 14,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-01T23:45:09Z",
      "side": 1,
      "message": "ðŸ‘Œ",
      "parentUuid": "9a3ef0ff_5cbf6fe7",
      "revId": "e691595d630625dd3f10508abae42f4803ca4954",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}