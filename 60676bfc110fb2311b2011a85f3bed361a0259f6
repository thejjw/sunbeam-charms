{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "542aab90_e7cca88a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 35007
      },
      "writtenOn": "2024-02-21T03:17:24Z",
      "side": 1,
      "message": "LGTM",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edb3a3c5_6eb86bd3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-21T04:50:46Z",
      "side": 1,
      "message": "LGTM, I tested that it sets the schedule as expected when adding/removing the logging relation.\n\nOne small nit, but not blocking.",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "002f58af_2894b8df",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-21T04:50:46Z",
      "side": 1,
      "message": "Nit: these methods can be combined, because they are identical.  Maybe something like `_on_log_proxy_endpoint_changed(self, event)`.",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfd7622c_305d54a6",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-21T14:11:22Z",
      "side": 1,
      "message": "I chose to do `joined/departed` instead because relation-joined/departed are garenteed to be filed at the begining/end of the relation life-cycle; that\u0027s not always true for `relation-changed` from my tests.\n\nPlus, this avoids unnecessary context rendering (relation changed could multiple times during the life-cycle, and there\u0027s no need to track those for our purposes). I think it\u0027s important keeping operation efficient over keeping the code compact.",
      "parentUuid": "002f58af_2894b8df",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e7d28b8_33fb599c",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 34352
      },
      "writtenOn": "2024-02-21T21:21:59Z",
      "side": 1,
      "message": "No I mean to consolidate the handler functions, not the event - use the same events, but point them to the same handler method:\n\n```\n        self.framework.observe(\n            interface.on.log_proxy_endpoint_joined,\n            self._on_log_proxy_endpoint_changed,\n        )\n        self.framework.observe(\n            interface.on.log_proxy_endpoint_departed,\n            self._on_log_proxy_endpoint_changed,\n        )\n        return interface\n    def _on_log_proxy_endpoint_changed(self, event):\n        if not self.model.unit.is_leader():\n            return\n        # to trigger context re-rendering\n        self.charm.init_container_services()\n```",
      "parentUuid": "bfd7622c_305d54a6",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56dc0493_7e64ec96",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-21T22:49:09Z",
      "side": 1,
      "message": "I understand your point now. I was thinking maybe it\u0027s better having separate functions for clarity (and in case in future we need to add more things to it). But at this stage I think it makes sense to have just one. Will update the PR soon",
      "parentUuid": "2e7d28b8_33fb599c",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0558a2f9_f6ef4575",
        "filename": "charms/tempest-k8s/src/handlers.py",
        "patchSetId": 2
      },
      "lineNbr": 674,
      "author": {
        "id": 34543
      },
      "writtenOn": "2024-02-21T23:32:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "56dc0493_7e64ec96",
      "revId": "60676bfc110fb2311b2011a85f3bed361a0259f6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}